# RAG Pro Max 操作手册

**版本: v2.4.8**  
**更新日期**: 2025-12-21

---

## 📑 目录

1. [快速入门](#1-快速入门)
2. [核心功能详解](#2-核心功能详解)
3. [版本新特性 (v2.4.8)](#3-版本新特性-v247)
4. [常见问题](#4-常见问题)

---

## 1. 快速入门

### 1.1 启动应用
- **图形界面**: 在终端运行 `./start.sh` 或 `streamlit run src/apppro.py`。
- **Web 访问**: 浏览器打开 `http://localhost:8501`。

### 1.2 创建知识库
1.  在侧边栏输入新的知识库名称（或选择“➕ 新建...”）。
2.  **上传文件**: 点击“上传文档”选择本地文件（PDF, Word, TXT 等）。
3.  **网页抓取**: 选择“网页/搜索”模式，输入网址或关键词，系统将自动抓取内容。
4.  **高级选项**: 点击左下角的“🔧 高级选项”，可开启 OCR、自动摘要生成等功能。
5.  点击“🚀 执行处理”开始构建知识库。

### 1.3 开始对话
1.  构建完成后，知识库会自动加载。
2.  在底部输入框输入问题。
3.  系统将基于文档内容回答，并列出引用来源。
4.  **追问推荐**: 回答结束后，系统会自动生成 3 个相关追问问题，点击即可继续对话。

---

## 2. 核心功能详解

### 🕷️ 网页抓取 (Web Crawling)
- **智能目录锁定**: 系统强制锁定本次抓取生成的目录，确保数据源准确。
- **全链路处理**: 高级选项（OCR、摘要）对抓取内容同样生效。
- **自动摘要**: 抓取完成后可自动为每个页面生成 AI 摘要。

### 👁️ macOS 原生预览
- **快速查看**: 点击文件列表中的 `👁️` 图标，直接唤起 macOS Quick Look。
- **非阻塞**: 预览窗口独立置顶，不影响主程序操作。

### 📊 数据统计与管理
- **单页垂直流**: 知识库详情与文件列表合并显示，无需切换标签页。
- **批量操作**: 支持全选/多选文件，进行批量删除或重新摘要。
- **实时监控**: 侧边栏实时显示 CPU、内存及任务队列状态。

---

## 3. 版本新特性 (v2.5.1)

### 🐛 关键修复与增强
- **知识库跳转**: 修复了网页抓取和新建知识库后无法自动跳转的问题，现在创建即用。
- **稳定性**: 修复了模型维度检测的异常，增强了系统在高负载下的稳定性。
- **多进程查询**: 引入了多进程联合查询引擎，显著提升了多知识库模式下的响应速度。

### 🧹 深度清理与性能提升 (v2.4.8)
- **极致瘦身**: 移除了所有废弃的工具模块和旧版 API，系统运行更轻量。
- **交互修复**: 修复了追问建议有时不显示的问题，现在每次回答后均会自动刷新显示。
- **API 升级**: 全面启用 v2.0 RESTful API，支持增量更新和多模态查询。

### 🎨 界面体验优化
- **布局紧凑**: 侧边栏和统计卡片采用极简布局，最大化内容展示区域。
- **防抖设计**: 文件列表操作采用局部刷新技术，杜绝页面闪烁。

---

## 4. 常见问题

**Q: 为什么看不到“追问推荐”？**
A: 请确保 LLM 配置正确且响应正常。v2.4.8 修复了 UI 刷新问题，现在回答生成后界面会自动刷新以显示建议。

**Q: 如何使用 API？**
A: 启动服务后，访问 `http://localhost:8502/docs` 查看完整的 Swagger API 文档。

**Q: 支持哪些文件格式？**
A: 支持 PDF, DOCX, PPTX, TXT, MD, HTML, CSV, XLSX, JSON 以及常见的图片格式（通过 OCR 识别）。