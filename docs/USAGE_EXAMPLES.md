# RAG Pro Max ä½¿ç”¨ç¤ºä¾‹

æœ¬æ–‡æ¡£æä¾›è¯¦ç»†çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ RAG Pro Maxã€‚

---

## ğŸ“š ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [çŸ¥è¯†åº“ç®¡ç†](#çŸ¥è¯†åº“ç®¡ç†)
3. [æ–‡æ¡£ä¸Šä¼ ](#æ–‡æ¡£ä¸Šä¼ )
4. [æ™ºèƒ½é—®ç­”](#æ™ºèƒ½é—®ç­”)
5. [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½)
6. [å‘½ä»¤è¡Œå·¥å…·](#å‘½ä»¤è¡Œå·¥å…·)
7. [API ä½¿ç”¨](#api-ä½¿ç”¨)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¤ºä¾‹ 1: 5åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

```bash
# 1. å¯åŠ¨åº”ç”¨
./scripts/start.sh

# 2. æµè§ˆå™¨æ‰“å¼€ http://localhost:8501

# 3. ç‚¹å‡» "âš¡ ä¸€é”®é…ç½®ï¼ˆæ¨èæ–°æ‰‹ï¼‰"

# 4. åˆ›å»ºçŸ¥è¯†åº“
#    - è¾“å…¥åç§°: "æˆ‘çš„ç¬¬ä¸€ä¸ªçŸ¥è¯†åº“"
#    - ç‚¹å‡» "åˆ›å»ºæ–°çŸ¥è¯†åº“"

# 5. ä¸Šä¼ æ–‡æ¡£
#    - ç‚¹å‡» "ä¸Šä¼ æ–‡æ¡£"
#    - é€‰æ‹© PDF/DOCX/TXT æ–‡ä»¶
#    - ç­‰å¾…å¤„ç†å®Œæˆ

# 6. å¼€å§‹å¯¹è¯
#    - åœ¨è¾“å…¥æ¡†è¾“å…¥é—®é¢˜
#    - æŸ¥çœ‹ç­”æ¡ˆå’Œå¼•ç”¨æ¥æº
```

**é¢„æœŸæ—¶é—´**: 5 åˆ†é’Ÿ  
**éš¾åº¦**: â­â˜†â˜†â˜†â˜†

---

## ğŸ“¦ çŸ¥è¯†åº“ç®¡ç†

### ç¤ºä¾‹ 2: åˆ›å»ºä¸“ä¸šçŸ¥è¯†åº“

```python
# ä½¿ç”¨ Python API
from src.kb import KBManager

# åˆ›å»ºçŸ¥è¯†åº“ç®¡ç†å™¨
kb_mgr = KBManager(base_path="vector_db_storage")

# åˆ›å»ºçŸ¥è¯†åº“
success, msg = kb_mgr.create("æŠ€æœ¯æ–‡æ¡£åº“")
print(msg)  # âœ… çŸ¥è¯†åº“ 'æŠ€æœ¯æ–‡æ¡£åº“' åˆ›å»ºæˆåŠŸ

# æ£€æŸ¥æ˜¯å¦å­˜åœ¨
if kb_mgr.exists("æŠ€æœ¯æ–‡æ¡£åº“"):
    print("çŸ¥è¯†åº“å·²åˆ›å»º")

# è·å–çŸ¥è¯†åº“ä¿¡æ¯
info = kb_mgr.get_info("æŠ€æœ¯æ–‡æ¡£åº“")
print(f"æ–‡æ¡£æ•°: {info.get('doc_count', 0)}")
```

### ç¤ºä¾‹ 3: æ‰¹é‡ç®¡ç†çŸ¥è¯†åº“

```python
# åˆ—å‡ºæ‰€æœ‰çŸ¥è¯†åº“
kbs = kb_mgr.list_all()
print(f"å…±æœ‰ {len(kbs)} ä¸ªçŸ¥è¯†åº“")

# é‡å‘½åçŸ¥è¯†åº“
success, msg = kb_mgr.rename("æ—§åç§°", "æ–°åç§°")

# åˆ é™¤çŸ¥è¯†åº“
success, msg = kb_mgr.delete("ä¸éœ€è¦çš„çŸ¥è¯†åº“")

# æœç´¢çŸ¥è¯†åº“
results = kb_mgr.search("æŠ€æœ¯")
print(f"æ‰¾åˆ° {len(results)} ä¸ªåŒ¹é…çš„çŸ¥è¯†åº“")
```

---

## ğŸ“„ æ–‡æ¡£ä¸Šä¼ 

### ç¤ºä¾‹ 4: å•æ–‡ä»¶ä¸Šä¼ 

**Web ç•Œé¢**:
1. é€‰æ‹©çŸ¥è¯†åº“
2. ç‚¹å‡» "ä¸Šä¼ æ–‡æ¡£"
3. é€‰æ‹©æ–‡ä»¶ï¼ˆæ”¯æŒ PDFã€DOCXã€TXTã€MDã€XLSXã€PPTXã€CSVã€HTMLã€JSONã€ZIPï¼‰
4. ç­‰å¾…å¤„ç†å®Œæˆ

**æ”¯æŒçš„æ–‡ä»¶**:
- ğŸ“„ PDFï¼ˆåŒ…æ‹¬æ‰«æç‰ˆï¼Œè‡ªåŠ¨ OCRï¼‰
- ğŸ“ Word æ–‡æ¡£ï¼ˆDOCXï¼‰
- ğŸ“‹ æ–‡æœ¬æ–‡ä»¶ï¼ˆTXTã€MDï¼‰
- ğŸ“Š Excel è¡¨æ ¼ï¼ˆXLSXï¼‰
- ğŸ¨ PowerPointï¼ˆPPTXï¼‰
- ğŸ“ˆ CSV æ•°æ®
- ğŸŒ HTML ç½‘é¡µ
- ğŸ”§ JSON æ•°æ®
- ğŸ“¦ ZIP å‹ç¼©åŒ…ï¼ˆè‡ªåŠ¨è§£å‹ï¼‰

### ç¤ºä¾‹ 5: æ‰¹é‡ä¸Šä¼ æ–‡ä»¶å¤¹

```bash
# å‡†å¤‡æ–‡æ¡£æ–‡ä»¶å¤¹
mkdir -p ~/documents/tech_docs
cp *.pdf ~/documents/tech_docs/

# åœ¨ Web ç•Œé¢:
# 1. ç‚¹å‡» "æ‰¹é‡ä¸Šä¼ æ–‡ä»¶å¤¹"
# 2. é€‰æ‹© ~/documents/tech_docs
# 3. ç³»ç»Ÿè‡ªåŠ¨å¤„ç†æ‰€æœ‰æ–‡ä»¶
```

**å¤„ç†é€Ÿåº¦**:
- PDF (100é¡µ): ~30ç§’
- DOCX (50é¡µ): ~15ç§’
- TXT (1MB): ~5ç§’

### ç¤ºä¾‹ 6: ä½¿ç”¨ Python API ä¸Šä¼ 

```python
from src.processors import UploadHandler

# åˆ›å»ºä¸Šä¼ å¤„ç†å™¨
handler = UploadHandler(
    kb_name="æŠ€æœ¯æ–‡æ¡£åº“",
    persist_dir="vector_db_storage/æŠ€æœ¯æ–‡æ¡£åº“"
)

# ä¸Šä¼ æ–‡ä»¶
result = handler.process_uploads([file1, file2, file3])

print(f"æˆåŠŸ: {result.success_count}")
print(f"è·³è¿‡: {result.skipped_count}")
print(f"åŸå› : {result.skip_reasons}")
```

---

## ğŸ’¬ æ™ºèƒ½é—®ç­”

### ç¤ºä¾‹ 7: åŸºç¡€é—®ç­”

```
ç”¨æˆ·: ä»€ä¹ˆæ˜¯ RAGï¼Ÿ

åŠ©æ‰‹: RAGï¼ˆRetrieval-Augmented Generationï¼‰æ˜¯æ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯...

ğŸ“š å¼•ç”¨æ¥æº:
1. introduction.pdf (ç¬¬ 3 é¡µ) - ç›¸ä¼¼åº¦: 0.89
2. concepts.md (ç¬¬ 1 èŠ‚) - ç›¸ä¼¼åº¦: 0.85
```

### ç¤ºä¾‹ 8: å¤šè½®å¯¹è¯

```
ç”¨æˆ·: ä»‹ç»ä¸€ä¸‹ Python çš„è£…é¥°å™¨

åŠ©æ‰‹: Python è£…é¥°å™¨æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼...

ç”¨æˆ·: èƒ½ç»™ä¸ªä¾‹å­å—ï¼Ÿ

åŠ©æ‰‹: å½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨ä¾‹å­...
[ç³»ç»Ÿä¼šè®°ä½ä¸Šä¸‹æ–‡ï¼ŒçŸ¥é“"ä¾‹å­"æŒ‡çš„æ˜¯è£…é¥°å™¨çš„ä¾‹å­]

ç”¨æˆ·: å®ƒæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿ

åŠ©æ‰‹: è£…é¥°å™¨å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯...
[ç»§ç»­åŸºäºè£…é¥°å™¨çš„ä¸Šä¸‹æ–‡å›ç­”]
```

### ç¤ºä¾‹ 9: å¼•ç”¨ç‰¹å®šå†…å®¹

```
ç”¨æˆ·: @ç¬¬ä¸‰ç«  æ€»ç»“ä¸€ä¸‹ä¸»è¦å†…å®¹

åŠ©æ‰‹: [åŸºäºç¬¬ä¸‰ç« çš„å†…å®¹è¿›è¡Œæ€»ç»“]

ç”¨æˆ·: @introduction.pdf è¿™ä¸ªæ–‡æ¡£è®²äº†ä»€ä¹ˆï¼Ÿ

åŠ©æ‰‹: [ä¸“é—¨é’ˆå¯¹ introduction.pdf å›ç­”]
```

---

## ğŸ¯ é«˜çº§åŠŸèƒ½

### ç¤ºä¾‹ 10: å¯ç”¨ Re-rankingï¼ˆé‡æ’åºï¼‰

**æ•ˆæœ**: å‡†ç¡®ç‡æå‡ 10-20%

```
åœ¨ä¾§è¾¹æ  "ğŸ”§ é«˜çº§é…ç½®" ä¸­:
1. å‹¾é€‰ "å¯ç”¨ Re-ranking"
2. é€‰æ‹©æ¨¡å‹: BAAI/bge-reranker-base
3. è®¾ç½® Top-K: 10
```

**åŸç†**:
- ç¬¬ä¸€æ­¥: å‘é‡æ£€ç´¢è·å–å€™é€‰æ–‡æ¡£
- ç¬¬äºŒæ­¥: Cross-Encoder ç²¾ç¡®æ’åº
- ç»“æœ: æ›´å‡†ç¡®çš„æ–‡æ¡£æ’åº

### ç¤ºä¾‹ 11: å¯ç”¨ BM25 æ··åˆæ£€ç´¢

**æ•ˆæœ**: å‡†ç¡®ç‡å†æå‡ 5-10%

```
åœ¨ä¾§è¾¹æ  "ğŸ”§ é«˜çº§é…ç½®" ä¸­:
1. å‹¾é€‰ "å¯ç”¨ BM25 æ··åˆæ£€ç´¢"
2. è®¾ç½®æƒé‡: 0.5 (å‘é‡) + 0.5 (å…³é”®è¯)
```

**é€‚ç”¨åœºæ™¯**:
- ä¸“ä¸šæœ¯è¯­æŸ¥è¯¢
- ç²¾ç¡®å…³é”®è¯åŒ¹é…
- æŠ€æœ¯æ–‡æ¡£æ£€ç´¢

### ç¤ºä¾‹ 12: è°ƒæ•´æ£€ç´¢å‚æ•°

```python
# åœ¨é…ç½®æ–‡ä»¶ config/rag_config.json ä¸­:
{
  "chunk_size": 500,           # æ–‡æ¡£åˆ†å—å¤§å°
  "chunk_overlap": 50,         # åˆ†å—é‡å é•¿åº¦
  "top_k": 5,                  # æ£€ç´¢æ–‡æ¡£æ•°é‡
  "similarity_threshold": 0.7  # ç›¸ä¼¼åº¦é˜ˆå€¼
}
```

**å‚æ•°è¯´æ˜**:
- `chunk_size`: è¶Šå¤§ä¿ç•™æ›´å¤šä¸Šä¸‹æ–‡ï¼Œä½†æ£€ç´¢ç²¾åº¦é™ä½
- `chunk_overlap`: é¿å…é‡è¦ä¿¡æ¯è¢«åˆ†å‰²
- `top_k`: å¢åŠ å¯èƒ½æé«˜å¬å›ç‡ï¼Œä½†å¢åŠ å™ªéŸ³
- `similarity_threshold`: è¿‡æ»¤ä½ç›¸å…³åº¦æ–‡æ¡£

---

## ğŸ’» å‘½ä»¤è¡Œå·¥å…·

### ç¤ºä¾‹ 13: ä½¿ç”¨ kbllama

```bash
# å®‰è£…
sudo ln -s $(pwd)/kbllama /usr/local/bin/kbllama

# åˆ—å‡ºæ‰€æœ‰çŸ¥è¯†åº“
kbllama list

# è¾“å‡º:
# ğŸ“š å¯ç”¨çš„çŸ¥è¯†åº“:
#   1. æŠ€æœ¯æ–‡æ¡£åº“ (125 ä¸ªæ–‡æ¡£)
#   2. äº§å“æ‰‹å†Œ (89 ä¸ªæ–‡æ¡£)
#   3. ç ”ç©¶è®ºæ–‡ (234 ä¸ªæ–‡æ¡£)

# äº¤äº’å¼å¯¹è¯
kbllama run æŠ€æœ¯æ–‡æ¡£åº“
>>> ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼Ÿ
[å›ç­”...]
>>> å®ƒæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ
[å›ç­”...]
>>> exit

# å•æ¬¡æŸ¥è¯¢
kbllama run æŠ€æœ¯æ–‡æ¡£åº“ "Docker å’Œ Kubernetes çš„åŒºåˆ«"

# æŸ¥çœ‹çŸ¥è¯†åº“ä¿¡æ¯
kbllama show æŠ€æœ¯æ–‡æ¡£åº“
```

---

## ğŸ”§ API ä½¿ç”¨

### ç¤ºä¾‹ 14: Python API å®Œæ•´ç¤ºä¾‹

```python
#!/usr/bin/env python3
"""RAG Pro Max API ä½¿ç”¨ç¤ºä¾‹"""

from src.kb import KBManager
from src.config import ConfigLoader
from src.chat import HistoryManager
from src.logging import LogManager

# 1. åˆå§‹åŒ–
logger = LogManager()
kb_mgr = KBManager()
config = ConfigLoader.load()

# 2. åˆ›å»ºçŸ¥è¯†åº“
logger.log('INFO', "å¼€å§‹åˆ›å»ºçŸ¥è¯†åº“", stage="åˆå§‹åŒ–")
success, msg = kb_mgr.create("APIæµ‹è¯•åº“")
print(msg)

# 3. ä¸Šä¼ æ–‡æ¡£ï¼ˆéœ€è¦ä½¿ç”¨ Web ç•Œé¢æˆ–æ–‡ä»¶å¤„ç†å™¨ï¼‰
# è¿™é‡Œå‡è®¾å·²ç»ä¸Šä¼ äº†æ–‡æ¡£

# 4. æŸ¥è¯¢çŸ¥è¯†åº“
from src.rag_engine import RAGEngine

engine = RAGEngine(
    persist_dir="vector_db_storage/APIæµ‹è¯•åº“",
    embed_model="BAAI/bge-small-zh-v1.5"
)

# 5. æé—®
response = engine.query("ä»€ä¹ˆæ˜¯ RAGï¼Ÿ")
print(f"å›ç­”: {response.response}")
print(f"æ¥æº: {len(response.source_nodes)} ä¸ªæ–‡æ¡£")

# 6. ä¿å­˜å¯¹è¯å†å²
messages = [
    {"role": "user", "content": "ä»€ä¹ˆæ˜¯ RAGï¼Ÿ"},
    {"role": "assistant", "content": response.response}
]
HistoryManager.save("APIæµ‹è¯•åº“", messages)

# 7. åŠ è½½å†å²
history = HistoryManager.load("APIæµ‹è¯•åº“")
print(f"å†å²è®°å½•: {len(history)} æ¡æ¶ˆæ¯")

# 8. æ¸…ç†
kb_mgr.delete("APIæµ‹è¯•åº“")
logger.log('INFO', "æµ‹è¯•å®Œæˆ", stage="æ¸…ç†")
```

---

## ğŸ¬ è§†é¢‘æ•™ç¨‹

### å®˜æ–¹æ•™ç¨‹ï¼ˆå³å°†æ¨å‡ºï¼‰

1. **å¿«é€Ÿå…¥é—¨** (5åˆ†é’Ÿ)
   - å®‰è£…å’Œå¯åŠ¨
   - åˆ›å»ºç¬¬ä¸€ä¸ªçŸ¥è¯†åº“
   - ä¸Šä¼ æ–‡æ¡£å’Œæé—®

2. **è¿›é˜¶ä½¿ç”¨** (15åˆ†é’Ÿ)
   - Re-ranking å’Œ BM25
   - å‚æ•°è°ƒä¼˜
   - æ‰¹é‡å¤„ç†

3. **å¼€å‘è€…æŒ‡å—** (30åˆ†é’Ÿ)
   - Python API ä½¿ç”¨
   - è‡ªå®šä¹‰æ¨¡å—
   - æ€§èƒ½ä¼˜åŒ–

**è®¢é˜…æ›´æ–°**: [YouTubeé¢‘é“](#) | [Bç«™](#)

---

## ğŸ’¡ æœ€ä½³å®è·µ

### æ–‡æ¡£å‡†å¤‡
- âœ… ä½¿ç”¨æ¸…æ™°çš„æ–‡æ¡£ç»“æ„
- âœ… é¿å…æ‰«æè´¨é‡å·®çš„ PDF
- âœ… å¤§æ–‡ä»¶å»ºè®®åˆ†å‰²ä¸Šä¼ 
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„æ–‡ä»¶å

### çŸ¥è¯†åº“ç®¡ç†
- âœ… æŒ‰ä¸»é¢˜åˆ›å»ºç‹¬ç«‹çŸ¥è¯†åº“
- âœ… å®šæœŸæ¸…ç†æ— ç”¨æ–‡æ¡£
- âœ… ä½¿ç”¨æè¿°æ€§çš„çŸ¥è¯†åº“åç§°
- âœ… å¤‡ä»½é‡è¦çŸ¥è¯†åº“

### æŸ¥è¯¢æŠ€å·§
- âœ… ä½¿ç”¨å®Œæ•´çš„é—®é¢˜å¥å­
- âœ… åŒ…å«å…³é”®è¯å’Œä¸Šä¸‹æ–‡
- âœ… åˆ©ç”¨å¤šè½®å¯¹è¯åŠŸèƒ½
- âœ… ä½¿ç”¨ @ å¼•ç”¨ç‰¹å®šæ–‡æ¡£

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: ä¸Šä¼ æ–‡æ¡£å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆ<100MBï¼‰å’Œæ ¼å¼æ˜¯å¦æ”¯æŒ

### Q: æŸ¥è¯¢ç»“æœä¸å‡†ç¡®ï¼Ÿ
A: å°è¯•å¯ç”¨ Re-ranking å’Œ BM25ï¼Œè°ƒæ•´ top_k å‚æ•°

### Q: å¦‚ä½•æé«˜å¤„ç†é€Ÿåº¦ï¼Ÿ
A: ä½¿ç”¨ GPU åŠ é€Ÿï¼Œå‡å° chunk_sizeï¼Œå…³é—­å…ƒæ•°æ®æå–

### Q: å¦‚ä½•å¤‡ä»½çŸ¥è¯†åº“ï¼Ÿ
A: å¤åˆ¶ `vector_db_storage/çŸ¥è¯†åº“åç§°` æ–‡ä»¶å¤¹

---

## ğŸ“ è·å–å¸®åŠ©

- ğŸ“– [å®Œæ•´æ–‡æ¡£](../README.md)
- ğŸ› [é—®é¢˜åé¦ˆ](https://github.com/yourusername/rag-pro-max/issues)
- ğŸ’¬ [è®¨è®ºåŒº](https://github.com/yourusername/rag-pro-max/discussions)
- ğŸ“§ Email: support@example.com

---

**æ›´å¤šç¤ºä¾‹æŒç»­æ›´æ–°ä¸­...**
