# 更新日志

## v1.5.0 (2025-12-09)

### 🚀 性能优化
- **查询缓存系统**: LRU 缓存机制，提升重复查询速度 80%+
- **内存优化**: 优化模型加载和内存管理

### 📦 新增模块
- `src/utils/query_cache.py` - 查询缓存管理器 (71行)
- `src/chat/suggestion_engine.py` - 推荐问题生成引擎 (67行)
- `src/utils/error_handler.py` - 统一错误处理模块 (82行)

### ✨ 功能改进
- **扩展 LogManager**: 新增 10+ 个日志方法
  - `start_operation()` / `complete_operation()`
  - `processing()` / `data_summary()`
  - `separator()` / `progress_bar()`
  - `cpu_multicore_*()` 系列方法
- **推荐引擎**: 独立的推荐问题管理
- **错误处理**: 友好的错误提示和恢复建议

### 🐛 修复问题
- **terminal_logger 引用**: 全面替换为 LogManager
- **logger 导入冲突**: 修复 model_manager.py 和 chat_engine.py
- **不存在的方法**: 替换 log_model_loading 为标准方法
- **重复参数**: 修复 rag_engine.py 和 index_builder.py
- **语法错误**: 修复 model_manager.py 的括号问题

### 🧪 测试
- 新增 v1.5.0 可行性测试（6/6 通过）
- 出厂测试：58/63 通过
- 所有新模块 100% 测试覆盖

### 📝 代码质量
- 新增 3 个独立模块（+220 行）
- 代码更模块化、可维护
- 统一错误处理机制
- 统一日志接口

---

## v1.4.4 (2025-12-09)

### 🐛 Bug 修复
- **修复追问推荐按钮导致回答消失的 bug**
- **修复队列处理导致回答无法显示的问题**

### ✨ 功能改进
- 推荐问题在回答后立即显示（chat_message 块外）
- 队列处理改为手动触发模式，避免内容丢失
- 推荐问题基于上下文生成，支持知识库验证
- 用户体验优化：可控制处理节奏，查看每个回答

### 🧪 测试
- 可行性测试：7/7 通过
- 出厂测试：58/63 通过 (92.1%)
- 语法检查：通过

### 📝 文档
- 创建 RELEASE_v1.4.4.md
- 创建 VERSION_v1.4.4_SUMMARY.md
- 创建 RELEASE_CHECKLIST_v1.4.4.md
- 更新 README.md

### 🗑️ 清理
- 删除 .DS_Store 文件
- 清理 Python 缓存
- 归档旧的阶段总结文档
- 清理测试数据

---

## v1.4.2 (2025-12-09)

### 🎉 重大更新
- **Stage 10-12 重构完成** - 全部 12 个阶段完成
- **代码迁移完成** - apppro.py 迁移到新模块接口
- **接口统一** - 所有模块使用标准接口

### 📦 新增模块
- `src/logging/` - 统一日志管理系统
- `src/config/` - 配置管理系统
- `src/chat/` - 聊天管理系统

### 🔧 代码改进
- 提取 16 个独立模块，共 2572 行代码
- 替换 9 个自定义日志方法为标准接口
- 统一配置/聊天/知识库管理接口
- 采用兼容层模式，保持向后兼容

### ✅ 测试
- 新增 20 个单元测试（100% 通过）
- 出厂测试：61/66 通过 (92.4%)
- 应用启动测试：通过

### 🧹 清理
- 删除备份文件和临时测试
- 归档 20 个临时文档
- 清理 Python 缓存

### 📚 文档
- 更新 README.md
- 新增 RELEASE_v1.4.2.md
- 新增 MIGRATION_COMPLETE.md
- 更新项目结构图

### 🎯 代码质量
- ⭐⭐⭐⭐⭐ 生产就绪
- 模块化程度：优秀
- 测试覆盖率：高
- 向后兼容：100%

---

## v1.4.0 (2025-12-09)

### 🔧 Stage 6 并行执行重构
- 提取并行执行模块（ParallelExecutor）
- 统一并行接口，智能判断串行/并行
- 阈值优化：元数据 100→50，节点 20→10
- 新增 CPU 负载感知
- 中型知识库性能提升 30-40%

### 📝 问题队列机制
- 支持多问题排队处理
- 避免并发冲突

### 🧪 测试
- 新增 5 个单元测试
- 完整文档和对比分析

---

## v1.3.1 (2025-12-09)

### ⚡ Stage 5.3 用户体验优化
- 元数据提取默认关闭（默认快 30%）
- 问答流程流畅度优化（延迟降低 40-50%）
- 流式输出更流畅
- 缓存维度检测
- 累计性能提升 40-50%

---

## v1.3.0 (2025-12-09)

### ⚡ Stage 5 性能优化
- 元数据提取可选化（可加速 30%）
- 摘要队列异步化（加速 7.5%）
- 累计性能提升 35%
- 新增性能配置选项

---

## v1.2.1 (2025-12-09)

### 🔧 完整重构 (Stage 1-4)
- 提取 13 个模块，共 2289 行代码
- 主文件减少 709 行 (-22.1%)
- 删除重复代码 118 行
- 出厂测试 61/67 通过

---

## v1.2.0 (2025-12-08)

### 🔧 Stage 3 UI组件重构
- 提取 6 个 UI 模块
- 新增状态管理系统
- 修复 OCR 多进程调度问题
- 移除 OCR 页数限制

---

## v1.1.5 (2025-12-08)

### 🔧 Stage 2 重构
- 提取 RAG 核心引擎
- 提取资源监控模块
- 提取模型工具模块
- 新增 11 个单元测试

---

## v1.1.4 (2025-12-08)

### 🔧 模型管理重构
- 提取到 utils/model_manager.py
- 修复嵌入模型维度不匹配问题
- 新增模型加载日志

---

## v1.1.3 (2025-12-08)

### ✨ GPU利用率优化
- GPU 利用率：29.6% → 80-99%
- 统一内存管理
- 显存自动清理
- torch.compile 编译加速

---

## v1.1.2 (2025-12-08)

### ✨ 功能增强
- 效果对比模式
- 使用统计可视化
- 视觉反馈优化

---

## v1.1.1 (2025-12-07)

### ⚡ 易用性改进
- 一键配置（新手模式）
- 专业术语通俗化
- 侧边栏分组优化

---

## v1.0.0 (2024-11-30)

### ✨ 初始版本
- 多种文档格式支持
- 向量检索功能
- 多轮对话支持
- macOS 打包支持
- 系统监控面板
- 多核优化（80 线程）
