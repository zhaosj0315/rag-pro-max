# RAG Pro Max - æ™ºèƒ½æ–‡æ¡£é—®ç­”ç³»ç»Ÿ

<div align="center">

![Version](https://img.shields.io/badge/version-v2.8.1-brightgreen)
![Status](https://img.shields.io/badge/status-Stable-blue)
![Last Update](https://img.shields.io/badge/last%20update-2025--12--29-orange)

# ğŸš€ RAG Pro Max v2.8.1

> **ä¼ä¸šçº§ RAG çŸ¥è¯†åº“ç³»ç»Ÿ - æ™ºèƒ½æ¨èä¸æé€Ÿæ£€ç´¢çš„ç»ˆæè¿›åŒ–**
![Python](https://img.shields.io/badge/python-3.8+-green.svg)
![License](https://img.shields.io/badge/license-MIT-orange.svg)
![Platform](https://img.shields.io/badge/platform-macOS%20%7C%20Windows%20%7C%20Linux%20%7C%20Docker-lightgrey.svg)
![Test Coverage](https://img.shields.io/badge/test%20coverage-93%25-brightgreen.svg)
![Code Quality](https://img.shields.io/badge/code%20quality-ä¼ä¸šçº§-blue.svg)

**ğŸ”¥ å¼€æºå…è´¹çš„ä¼ä¸šçº§RAGåº”ç”¨ | æ”¯æŒæœ¬åœ°éƒ¨ç½² | æè‡´äº¤äº’ä½“éªŒ | ç”Ÿäº§å°±ç»ª**

åŸºäº Streamlit + LlamaIndex çš„æ™ºèƒ½æ–‡æ¡£é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒå¤šæ ¼å¼æ–‡æ¡£ä¸Šä¼ ï¼Œæä¾›è¯­ä¹‰æ£€ç´¢ã€å®æ—¶è”ç½‘å¢å¼ºã€æ™ºèƒ½æŸ¥è¯¢ä¼˜åŒ–å’Œ macOS åŸç”Ÿé¢„è§ˆåŠŸèƒ½ã€‚

**ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿**: è”ç½‘å®æ—¶å¢å¼º(æŠ˜å ç‰ˆ) â€¢ æ™ºèƒ½æŸ¥è¯¢æ”¹å†™ â€¢ æç®€ç´§å‡‘ UI â€¢ ç»Ÿä¸€æ¶æ„ â€¢ é›¶é‡å¤ä»£ç  â€¢ ä¼ä¸šçº§æ ‡å‡† â€¢ GPUåŠ é€Ÿ â€¢ ç”Ÿäº§å°±ç»ª

</div>

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸŒ è”ç½‘æœç´¢ä¸å®æ—¶å¢å¼º (v2.8.1 ä¼˜åŒ–)
- **DuckDuckGo é›†æˆ**: è‡ªåŠ¨æŠ“å–äº’è”ç½‘æœ€æ–°ä¿¡æ¯ï¼Œä½œä¸ºçŸ¥è¯†åº“çš„å®æ—¶è¡¥å……
- **è´¨é‡è¯„ä¼°ç³»ç»Ÿ (v2.8.1)**: é›†æˆæ™ºèƒ½è´¨é‡åˆ†æå™¨ï¼Œè‡ªåŠ¨å¯¹ç»“æœè¿›è¡Œæƒå¨æ€§è¯„åˆ†ä¸æ ‡æ³¨ (ğŸ†/â­/âš ï¸)
- **æŠ˜å å±•ç¤º (Collapsed View)**: æœç´¢è¯¦æƒ…æŒ‰è´¨é‡æ’åºå¹¶é»˜è®¤æ”¶çº³åœ¨çŠ¶æ€æ ä¸­ï¼Œä¿æŒç•Œé¢çº¯å‡€
- **æé—®æ°”æ³¡å‡€åŒ–**: å¯¹è¯ç•Œé¢ä»…ä¿ç•™ç”¨æˆ·åŸå§‹é—®é¢˜ï¼Œåå°é™é»˜æ³¨å…¥å‚è€ƒèµ„æ–™ï¼Œæ˜¾è‘—æå‡é˜…è¯»ä½“éªŒ
- **æ··åˆæ£€ç´¢é€»è¾‘**: å®Œç¾èåˆâ€œæœ¬åœ°ä¸“ä¸šçŸ¥è¯†â€ä¸â€œå…¨ç½‘å®æ—¶åŠ¨æ€â€ï¼Œè§£å†³çŸ¥è¯†æ—¶æ•ˆæ€§é—®é¢˜

### ğŸ¨ æè‡´ç´§å‡‘ UI (v2.8.1 å‡çº§)
- **æ ‡é¢˜å­—å·è°ƒä¼˜**: å…¨ç³»ç»Ÿæ ‡é¢˜å±‚çº§é™çº§ï¼ˆH3->H4/H5ï¼‰ï¼Œæœ‰æ•ˆåˆ©ç”¨å±å¹•å‚ç›´ç©ºé—´ï¼Œè§†è§‰æ„Ÿå—æ›´ä¸“ä¸š
- **æç®€åŠŸèƒ½å·¥å…·æ **: ä½äºè¾“å…¥æ¡†ä¸Šæ–¹çš„ç´§å‡‘å·¥å…·æ ï¼Œé›†æˆæ¨¡å‹åˆ‡æ¢ã€å¿«æ·å¼€å…³ä¸ä¼šè¯ç®¡ç†
- **åŠ¨æ€é…ç½®è”åŠ¨**: å‚å•†ä¸‹æ‹‰æ¡†è‡ªåŠ¨è¿‡æ»¤æœªé…ç½®çš„æœåŠ¡å•†ï¼Œæ¨¡å‹åˆ—è¡¨å®æ—¶åŒæ­¥ä¿å­˜è‡³æœ¬åœ°é…ç½®
- **é›¶è·³åŠ¨è¾“å…¥æ¡†**: å½»åº•æ¶ˆé™¤ç”Ÿæˆå›ç­”æ—¶çš„å¸ƒå±€é—ªçƒï¼Œæä¾›ä¸æ»‘äº¤äº’

### ğŸ§  æ·±åº¦æ€è€ƒä¸æŸ¥è¯¢ä¼˜åŒ– (v2.8.0 æ–°å¢)
- **Query Rewriter**: åŸºäº LLM çš„æŸ¥è¯¢æ”¹å†™å¼•æ“ï¼Œè‡ªåŠ¨ä¿®æ­£æ¨¡ç³Šæé—®ã€è¡¥å…¨ä¸Šä¸‹æ–‡ã€å»é™¤å£è¯­åŒ–å¹²æ‰°
- **äº¤äº’å¼ä¼˜åŒ–ç¡®è®¤**: æä¾›åŸé—®é¢˜ä¸ä¼˜åŒ–åé—®é¢˜çš„å¯¹æ¯”é€‰æ‹©ï¼Œç¡®ä¿ AI çœŸæ­£ç†è§£æ‚¨çš„æ„å›¾
- **æ™ºèƒ½æ‹¦æˆªæœºåˆ¶**: è‡ªåŠ¨è¯†åˆ«é«˜è´¨é‡æé—®å¹¶é™é»˜æ”¾è¡Œï¼Œä»…åœ¨æé—®è´¨é‡ä¸ä½³æ—¶ä»‹å…¥
### ğŸ’¬ å¯¹è¯ç³»ç»Ÿ
- **å¤šè½®å¯¹è¯**: ä¿æŒä¸Šä¸‹æ–‡çš„è¿ç»­å¯¹è¯
- **æµå¼è¾“å‡º**: å®æ—¶ç”Ÿæˆå›ç­”ï¼Œæ”¯æŒä¸­æ–­
- **ç»Ÿä¸€æ¨è**: æ™ºèƒ½ç”Ÿæˆç›¸å…³é—®é¢˜ï¼Œæ”¯æŒèŠå¤©/æ–‡ä»¶/ç½‘é¡µåœºæ™¯
- **å†å²ç®¡ç†**: å¯¹è¯è®°å½•è‡ªåŠ¨ä¿å­˜

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### å››å±‚æ¶æ„è®¾è®¡
```
è¡¨ç°å±‚ (UI Layer)     - Streamlitç•Œé¢ç»„ä»¶
    â†“
æœåŠ¡å±‚ (Service)      - ä¸šåŠ¡é€»è¾‘æœåŠ¡
    â†“  
å…¬å…±å±‚ (Common)       - é€šç”¨å·¥å…·æ¨¡å—
    â†“
å·¥å…·å±‚ (Utils)        - åº•å±‚å·¥å…·å‡½æ•°
```

### æ ¸å¿ƒæ¨¡å—
- **apppro.py** - ä¸»åº”ç”¨å…¥å£ (4,127 è¡Œ)
- **services/** - æ–‡ä»¶æœåŠ¡ã€çŸ¥è¯†åº“æœåŠ¡ã€é…ç½®æœåŠ¡
- **processors/** - æ–‡æ¡£å¤„ç†å™¨ã€ç½‘é¡µçˆ¬è™« (15ä¸ªæ¨¡å—)
- **ui/** - ç”¨æˆ·ç•Œé¢ç»„ä»¶ (30ä¸ªæ¨¡å—)
- **utils/** - å·¥å…·å‡½æ•°åº“ (48ä¸ªæ¨¡å—)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- **Python**: 3.8+ (æ¨è 3.10+)
- **å†…å­˜**: 4GB+ (æ¨è 8GB+)
- **ç£ç›˜**: 10GB+ (åŒ…å«æ¨¡å‹ç¼“å­˜)
- **GPU**: å¯é€‰ (CUDA/MPSæ”¯æŒ)

### å®‰è£…éƒ¨ç½²

#### macOS/Linux è‡ªåŠ¨å®‰è£…
```bash
git clone https://github.com/zhaosj0315/rag-pro-max.git
cd rag-pro-max
./scripts/deploy_linux.sh  # Linux
pip install -r requirements.txt  # macOS
```

#### Windows è‡ªåŠ¨å®‰è£…
```cmd
git clone https://github.com/zhaosj0315/rag-pro-max.git
cd rag-pro-max
scripts\deploy_windows.bat
```

#### Docker éƒ¨ç½²
```bash
./scripts/docker-build.sh
docker-compose up -d
# è®¿é—®: http://localhost:8501
```

### å¯åŠ¨åº”ç”¨
```bash
# æ¨èæ–¹å¼ï¼ˆå«æµ‹è¯•ï¼‰
./start.sh

# ç›´æ¥å¯åŠ¨
streamlit run src/apppro.py
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### æ¨¡å‹é…ç½®
æ”¯æŒå¤šç§LLMåç«¯ï¼š
- **OpenAI**: GPT-3.5/GPT-4
- **Ollama**: æœ¬åœ°æ¨¡å‹ (qwen2.5:7bç­‰)
- **å…¶ä»–**: OpenAIå…¼å®¹æ¥å£

### æ ¸å¿ƒé…ç½®æ–‡ä»¶
```
config/
â”œâ”€â”€ app_config.json      # åº”ç”¨é…ç½®
â”œâ”€â”€ rag_config.json      # RAGå‚æ•°
â””â”€â”€ scheduler_config.json # è°ƒåº¦é…ç½®
```

### ç¯å¢ƒå˜é‡
```bash
# ç¦ç”¨è¯¦ç»†æ—¥å¿—
export PADDLE_LOG_LEVEL=50
export GLOG_minloglevel=3

# çº¿ç¨‹æ§åˆ¶
export OMP_NUM_THREADS=1
export OPENBLAS_NUM_THREADS=1
```

---

## ğŸ“Š æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **streamlit** â‰¥1.28.0 - Webç•Œé¢
- **llama-index** â‰¥0.9.0 - RAGå¼•æ“
- **chromadb** â‰¥0.4.0 - å‘é‡æ•°æ®åº“
- **sentence-transformers** â‰¥2.2.0 - åµŒå…¥æ¨¡å‹

### æ–‡æ¡£å¤„ç†
- **PyMuPDF** - PDFå¤„ç†
- **python-docx** - Wordæ–‡æ¡£
- **openpyxl** - Excelæ–‡æ¡£
- **paddleocr** - OCRè¯†åˆ«

### AI/ML
- **torch** â‰¥2.0.0 - æ·±åº¦å­¦ä¹ 
- **transformers** â‰¥4.30.0 - æ¨¡å‹åº“
- **ollama** â‰¥0.1.0 - æœ¬åœ°LLM

---

## ğŸ”§ APIæ¥å£

### RESTful API
```python
# å¯åŠ¨APIæœåŠ¡
python src/api/fastapi_server.py

# ä¸»è¦ç«¯ç‚¹
GET  /health              # å¥åº·æ£€æŸ¥
POST /query               # æŸ¥è¯¢æ¥å£
GET  /knowledge-bases     # çŸ¥è¯†åº“åˆ—è¡¨
POST /upload              # æ–‡ä»¶ä¸Šä¼ 
```

### æ ¸å¿ƒç±»æ¥å£
```python
# æ–‡ä»¶æœåŠ¡
from src.services.file_service import FileService
file_service = FileService()
result = file_service.validate_file(file_path)

# çŸ¥è¯†åº“æœåŠ¡  
from src.services.knowledge_base_service import KnowledgeBaseService
kb_service = KnowledgeBaseService()
kb_list = kb_service.list_knowledge_bases()

# é…ç½®æœåŠ¡
from src.services.config_service import get_config_service
config = get_config_service()
model = config.get_default_model()
```

---

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

### å¤„ç†é€Ÿåº¦
| æ–‡æ¡£ç±»å‹ | å¤§å° | å¤„ç†æ—¶é—´ | GPUåŠ é€Ÿ |
|---------|------|---------|---------|
| PDF | 10MB | ~45ç§’ | âœ… 2-5x |
| DOCX | 5MB | ~20ç§’ | âœ… è‡ªåŠ¨ |
| ç½‘é¡µ | 100é¡µ | ~2åˆ†é’Ÿ | âœ… å¹¶è¡Œ |

### ç³»ç»Ÿèµ„æº
| åœºæ™¯ | CPU | GPU | å†…å­˜ |
|------|-----|-----|------|
| ç©ºé—² | 5-10% | 0% | 2-3GB |
| å¤„ç† | 60-85% | 99% | 10-15GB |
| æŸ¥è¯¢ | 10-20% | 50-70% | 5-8GB |

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### å‡ºå‚æµ‹è¯•
```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•
python tests/factory_test.py

# æµ‹è¯•è¦†ç›–: 88/97 é€šè¿‡ (92.8%)
# æµ‹è¯•ç±»åˆ«: ç¯å¢ƒã€é…ç½®ã€æ¨¡å—ã€æ–‡æ¡£ã€å‘é‡åº“ç­‰
```

### åŠŸèƒ½éªŒè¯
- âœ… æ–‡æ¡£ä¸Šä¼ å’Œå¤„ç†
- âœ… çŸ¥è¯†åº“æ„å»º
- âœ… è¯­ä¹‰æ£€ç´¢
- âœ… å¤šè½®å¯¹è¯
- âœ… ç½‘é¡µæŠ“å–

---

## ğŸ“ ä½¿ç”¨æŒ‡å—

### 1. åˆ›å»ºçŸ¥è¯†åº“
1. å¯åŠ¨åº”ç”¨åï¼Œåœ¨ä¾§è¾¹æ è¾“å…¥çŸ¥è¯†åº“åç§°
2. ç‚¹å‡»"åˆ›å»ºæ–°çŸ¥è¯†åº“"
3. çŸ¥è¯†åº“åˆ›å»ºåè‡ªåŠ¨é€‰ä¸­

### 2. ä¸Šä¼ æ–‡æ¡£
- **å•æ–‡ä»¶**: ç‚¹å‡»"ä¸Šä¼ æ–‡æ¡£"é€‰æ‹©æ–‡ä»¶
- **æ‰¹é‡**: ç‚¹å‡»"æ‰¹é‡ä¸Šä¼ æ–‡ä»¶å¤¹"
- **ç½‘é¡µ**: è¾“å…¥URLè¿›è¡Œå†…å®¹æŠ“å–

### 3. å¼€å§‹å¯¹è¯
1. é€‰æ‹©å·²åˆ›å»ºçš„çŸ¥è¯†åº“
2. è¾“å…¥é—®é¢˜
3. æŸ¥çœ‹ç­”æ¡ˆå’Œå¼•ç”¨æ¥æº

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
src/
â”œâ”€â”€ apppro.py           # ä¸»åº”ç”¨ (3,715 è¡Œ)
â”œâ”€â”€ services/           # ä¸šåŠ¡æœåŠ¡å±‚
â”œâ”€â”€ common/             # å…¬å…±å·¥å…·å±‚  
â”œâ”€â”€ ui/                 # ç•Œé¢ç»„ä»¶
â”œâ”€â”€ processors/         # æ–‡æ¡£å¤„ç†
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â””â”€â”€ core/               # æ ¸å¿ƒæ§åˆ¶
```

### æ‰©å±•å¼€å‘
```python
# æ·»åŠ æ–°çš„æ–‡æ¡£å¤„ç†å™¨
class CustomProcessor:
    def process(self, file_path: str) -> str:
        # å¤„ç†é€»è¾‘
        return processed_content

# æ³¨å†Œå¤„ç†å™¨
from src.processors import register_processor
register_processor('.custom', CustomProcessor)
```

---

## ğŸ“š æ–‡æ¡£èµ„æº

- [ğŸ“‹ éƒ¨ç½²æŒ‡å—](DEPLOYMENT.md)
- [ğŸ§ª æµ‹è¯•è¯´æ˜](TESTING.md) 
- [â“ å¸¸è§é—®é¢˜](FAQ.md)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)
- [ğŸ“ æ›´æ–°æ—¥å¿—](CHANGELOG.md)
- [ğŸ”§ æ–‡æ¡£ç»´æŠ¤æ ‡å‡†](DOCUMENTATION_MAINTENANCE_STANDARD.md)
- [ğŸ”’ æ¨é€è§„èŒƒ](NON_ESSENTIAL_PUSH_STANDARD.md)
- [ğŸ§¹ å¼€å‘æ¸…ç†æ ‡å‡†](DEVELOPMENT_CLEANUP_STANDARD.md)
- [âš¡ å¼€å‘è§„èŒƒæ ‡å‡†](DEVELOPMENT_STANDARD.md)

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š
- [Streamlit](https://streamlit.io/) - Webåº”ç”¨æ¡†æ¶
- [LlamaIndex](https://www.llamaindex.ai/) - RAGæ¡†æ¶
- [ChromaDB](https://www.trychroma.com/) - å‘é‡æ•°æ®åº“
- [HuggingFace](https://huggingface.co/) - æ¨¡å‹å¹³å°

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Starï¼**

Made with â¤ï¸ by RAG Pro Max Team

</div>
