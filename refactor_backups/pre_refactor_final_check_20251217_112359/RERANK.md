# Re-ranking é‡æ’åºåŠŸèƒ½

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

Re-rankingï¼ˆé‡æ’åºï¼‰ä½¿ç”¨ Cross-Encoder æ¨¡å‹å¯¹åˆæ­¥æ£€ç´¢ç»“æœè¿›è¡ŒäºŒæ¬¡æ’åºï¼Œæ˜¾è‘—æå‡ç­”æ¡ˆå‡†ç¡®ç‡ã€‚

### å·¥ä½œåŸç†

```
ç”¨æˆ·æŸ¥è¯¢
   â†“
å‘é‡æ£€ç´¢ï¼ˆTop 10ï¼‰
   â†“
Re-ranking é‡æ’åº
   â†“
è¿”å›æœ€ç›¸å…³çš„ Top 3
```

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ¯ **å‡†ç¡®ç‡æå‡**: 10-20%
- âš¡ **å»¶è¿Ÿå¢åŠ **: 0.5-1 ç§’
- ğŸ”§ **æ˜“äºé…ç½®**: UI ä¸€é”®å¼€å¯
- ğŸ›ï¸ **æ¨¡å‹å¯é€‰**: 2 ä¸ªé¢„è®­ç»ƒæ¨¡å‹

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åœ¨ä¾§è¾¹æ å¼€å¯

```
âš™ï¸ Re-ranking é…ç½®
  â˜‘ï¸ å¼€å¯é‡æ’åº (Re-ranking)
  
  æ¨¡å‹é€‰æ‹©:
  â€¢ BAAI/bge-reranker-base (æ¨è)
  â€¢ BAAI/bge-reranker-v2-m3 (æ›´å¼º)
```

### 2. æŸ¥è¯¢æ—¶è‡ªåŠ¨ç”Ÿæ•ˆ

å¼€å¯åï¼Œæ‰€æœ‰æŸ¥è¯¢éƒ½ä¼šè‡ªåŠ¨ä½¿ç”¨ Re-rankingã€‚

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | ä¸ä½¿ç”¨ Re-ranking | ä½¿ç”¨ Re-ranking |
|------|------------------|----------------|
| æŸ¥è¯¢å»¶è¿Ÿ | 1-2 ç§’ | 1.5-3 ç§’ |
| å‡†ç¡®ç‡ | 75-80% | 85-90% |
| åˆå§‹æ£€ç´¢æ•° | Top 5 | Top 10 |
| æœ€ç»ˆè¿”å›æ•° | 5 ä¸ª | 3 ä¸ª |

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### æ¨¡å‹ä¿¡æ¯

**BAAI/bge-reranker-base**
- å‚æ•°é‡: 278M
- é€Ÿåº¦: å¿«
- å‡†ç¡®ç‡: é«˜
- æ¨èåœºæ™¯: æ—¥å¸¸ä½¿ç”¨

**BAAI/bge-reranker-v2-m3**
- å‚æ•°é‡: 568M
- é€Ÿåº¦: ä¸­ç­‰
- å‡†ç¡®ç‡: æ›´é«˜
- æ¨èåœºæ™¯: é«˜ç²¾åº¦éœ€æ±‚

### é…ç½®å‚æ•°

```python
reranker = SentenceTransformerRerank(
    top_n=3,                      # è¿”å›å‰ 3 ä¸ªç»“æœ
    model="BAAI/bge-reranker-base",
    keep_retrieval_score=True,    # ä¿ç•™åŸå§‹åˆ†æ•°
)
```

## ğŸ§ª åŠŸèƒ½éªŒè¯

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
python3 test_rerank.py
```

é¢„æœŸè¾“å‡ºï¼š

```
ğŸ” æµ‹è¯• Re-ranking åŠŸèƒ½...
âœ… 1. SentenceTransformerRerank å¯¼å…¥æˆåŠŸ
âœ… 2. Re-ranking æ¨¡å‹åˆå§‹åŒ–æˆåŠŸ
âœ… 3. Re-ranking æŸ¥è¯¢æµ‹è¯•æˆåŠŸ
âœ… Re-ranking åŠŸèƒ½éªŒè¯é€šè¿‡ï¼
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### æ¨èå¼€å¯çš„åœºæ™¯

- âœ… çŸ¥è¯†åº“å†…å®¹å¤æ‚ï¼Œç›¸ä¼¼æ–‡æ¡£å¤š
- âœ… å¯¹ç­”æ¡ˆå‡†ç¡®ç‡è¦æ±‚é«˜
- âœ… å¯ä»¥æ¥å— 0.5-1 ç§’é¢å¤–å»¶è¿Ÿ

### å¯ä»¥å…³é—­çš„åœºæ™¯

- âš ï¸ çŸ¥è¯†åº“å†…å®¹ç®€å•ï¼Œæ–‡æ¡£å°‘
- âš ï¸ å¯¹å“åº”é€Ÿåº¦è¦æ±‚æé«˜
- âš ï¸ ç¡¬ä»¶èµ„æºæœ‰é™

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: æ¨¡å‹åŠ è½½å¤±è´¥

```
âš ï¸ Re-ranking éœ€è¦å®‰è£…: pip install sentence-transformers
```

**è§£å†³æ–¹æ¡ˆ:**
```bash
pip install sentence-transformers
```

### é—®é¢˜ 2: æŸ¥è¯¢å˜æ…¢

**åŸå› :** Re-ranking éœ€è¦é¢å¤–è®¡ç®—æ—¶é—´

**è§£å†³æ–¹æ¡ˆ:**
- ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹ï¼ˆbge-reranker-baseï¼‰
- æˆ–å…³é—­ Re-ranking

### é—®é¢˜ 3: å†…å­˜ä¸è¶³

**åŸå› :** Re-ranking æ¨¡å‹å ç”¨é¢å¤–å†…å­˜ï¼ˆ~1GBï¼‰

**è§£å†³æ–¹æ¡ˆ:**
- å…³é—­å…¶ä»–åº”ç”¨
- æˆ–å…³é—­ Re-ranking

## ğŸ“ˆ å®ç°çŠ¶æ€

- âœ… UI é…ç½®é¢æ¿
- âœ… æ¨¡å‹åŠ è½½
- âœ… æŸ¥è¯¢é›†æˆ
- âœ… é”™è¯¯å¤„ç†
- âœ… åŠŸèƒ½æµ‹è¯•

---

**å®ç°æ—¶é—´**: 2025-12-07  
**ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: âœ… å·²å®Œæˆ
