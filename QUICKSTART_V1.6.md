# 🚀 RAG Pro Max v1.6 快速启动指南（最终版）

## 🎯 新功能速览

v1.6 最终版新增三大功能：
1. **🎯 查询改写** - 自动优化用户查询，提升准确率 5-10%
2. **📄 文档预览** - 上传前/后预览文档，带翻页功能
3. **💡 智能命名** - 自动生成有意义的知识库名称

---

## ⚡ 5分钟快速体验

### 1. 启动应用

```bash
cd /Users/zhaosj/Documents/rag-pro-max
streamlit run src/apppro.py
```

### 2. 体验智能命名

**步骤**:
1. 点击"➕ 新建知识库..."
2. 上传文件（单个或多个）
3. 系统自动生成建议名称
   - 单个PDF → `文件名_20251209`
   - 多个PDF → `文档集合_20251209`
   - 多个Markdown → `笔记集合_20251209`
4. 留空使用自动名称，或输入自定义名称
5. 点击"🚀 立即创建"

**效果**:
```
💡 建议名称：文档集合_20251209
[_____________________________]
留空自动生成，或输入自定义名称
```

### 3. 体验文档预览

#### 上传前预览

**步骤**:
1. 上传文件后，展开"📄 已选择 X 个文件"
2. 使用翻页浏览文件列表（每页10个）
3. 点击"👁️"按钮预览文档内容
4. 查看文件大小、类型和内容

**界面**:
```
📄 已选择 3 个文件 - 点击预览
  [⬅️ 上一页]  第 1/1 页  [下一页 ➡️]
  
  📎 CASE.pdf              1.8 MB    [👁️]
  📎 如何阅读一本书.pdf     16.4 MB   [👁️]
  📎 读书是一辈子的事.pdf   1.2 MB    [👁️]
```

#### 知识库文档列表

**步骤**:
1. 打开"📊 知识库详情与管理"
2. 切换到"📄 文档列表"标签页
3. 查看所有文档列表
4. 点击"👁️"查看详情
5. 点击"🗑️"删除文档

### 4. 体验查询改写

**步骤**:
1. 选择或创建一个知识库
2. 输入短查询："RAG是啥"
3. 系统自动显示改写建议
4. 选择"使用优化后的问题"
5. 查看更准确的回答

**效果对比**:
```
原查询：RAG是啥
改写后：什么是RAG技术？它的工作原理和应用场景是什么？

准确率提升：5-10%
```

---

## 🧪 运行测试

验证功能是否正常：

```bash
# 运行单元测试
python tests/test_query_rewriter.py

# 运行功能验证
python test_v1.6_features.py
```

**预期输出**:
```
✅ 找到 4 个文档
✅ 文档预览成功
✅ 查询改写功能正常
✅ 所有测试通过！
```

---

## 📚 详细文档

- [功能说明](docs/V1.6_FEATURES.md) - 详细功能介绍和使用示例
- [完成报告](V1.6_COMPLETION_REPORT.md) - 实现总结和测试结果

---

## 💡 使用技巧

### 智能命名

**最佳实践**:
- 单文件：自动使用文件名，简洁明了
- 多文件：根据类型自动分类，一目了然
- 自定义：可以覆盖自动名称，灵活自由

**命名规则**:
- PDF/DOCX → `文档集合_日期`
- MD/TXT → `笔记集合_日期`
- PY/JS → `代码库_日期`
- XLSX/CSV → `数据集_日期`

### 文档预览

**上传前预览**:
- 确保文档内容正确
- 检查文件格式是否支持
- 避免上传错误文件

**翻页功能**:
- 每页显示10个文件
- 支持上千个文件浏览
- 不会刷屏，体验流畅

**文档管理**:
- 定期查看文档列表
- 删除不需要的文档
- 检查文档分块是否合理

### 查询改写

**何时触发**:
- 查询过短（<5字）
- 包含口语化表达（"啥"、"咋"等）
- 检索结果相似度低

**最佳实践**:
- 短查询时接受改写建议
- 专业查询时使用原问题
- 观察改写效果，学习优化方式

---

## ⚠️ 注意事项

### 队列处理

- ✅ 队列中的问题会自动依次处理
- ✅ 处理问题时禁止切换知识库
- ✅ 显示队列状态和进度

### 知识库切换

- ⚠️ 正在处理问题时无法切换
- ✅ 等待处理完成后再切换
- ✅ 避免对话被意外中断

### 文档预览

1. **格式支持**: 
   - ✅ TXT, MD, JSON, CSV（完整支持）
   - ✅ PDF（前3页）
   - ✅ DOCX（前10段）

2. **删除操作**:
   - 只从 manifest 移除
   - 向量数据需重建索引才能完全删除
   - 建议定期重建索引

---

## 🐛 故障排除

### 智能命名不生效

**问题**: 上传文件后没有显示建议名称

**解决**:
1. 确认文件已成功上传
2. 检查文件类型是否支持
3. 刷新页面重试

### 文档预览失败

**问题**: 点击预览按钮无反应

**解决**:
1. 检查文件格式是否支持
2. 确认文件大小不超过 100MB
3. 查看控制台错误信息

### 队列问题不处理

**问题**: 队列中的问题一直等待

**解决**:
1. 检查是否正在处理其他问题
2. 等待当前问题处理完成
3. 刷新页面重试

---

## 📞 获取帮助

- **GitHub Issues**: https://github.com/yourusername/rag-pro-max/issues
- **文档**: 查看 `docs/` 目录下的详细文档
- **测试**: 运行测试脚本验证功能

---

## 🎉 开始使用

```bash
# 1. 启动应用
streamlit run src/apppro.py

# 2. 上传文件（体验智能命名）
# 3. 预览文档（体验翻页功能）
# 4. 输入短查询（体验改写）
# 5. 查看文档列表（体验管理）
```

**祝使用愉快！** 🚀

---

**版本**: v1.6.0 (最终版)  
**日期**: 2025-12-09  
**状态**: ✅ 完成并优化
